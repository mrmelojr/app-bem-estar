<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seu App de Bem-Estar Total</title>
    <link rel="manifest" href="/app-bem-estar/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for Inter font and text shadow */
        body {
            font-family: 'Inter', sans-serif;
        }
        .text-shadow-md {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        /* Active link styling */
        .active-link {
            background-color: white;
            color: #2563eb; /* blue-700 */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }
        /* Style for clickable exercise names */
        .exercise-detail-trigger {
            cursor: pointer;
            color: #2563eb; /* blue-700 */
            font-weight: bold;
            text-decoration: underline;
            transition: color 0.2s ease-in-out;
        }
        .exercise-detail-trigger:hover {
            color: #1d4ed8; /* blue-800 */
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 font-sans antialiased flex flex-col">

    <header class="bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg p-4 md:p-6 rounded-b-lg">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <h1 class="text-3xl md:text-4xl font-bold mb-4 md:mb-0 text-shadow-md">
                Seu App de Bem-Estar Total
            </h1>
            <nav class="flex flex-wrap justify-center gap-3 md:gap-6">
                <button id="nav-home" class="nav-link px-4 py-2 rounded-full text-lg font-medium transition-all duration-300 text-white hover:bg-blue-500 hover:shadow-md">
                    Início
                </button>
                <button id="nav-treinos" class="nav-link px-4 py-2 rounded-full text-lg font-medium transition-all duration-300 text-white hover:bg-blue-500 hover:shadow-md">
                    Treinos
                </button>
                <button id="nav-fisioterapia-pilates" class="nav-link px-4 py-2 rounded-full text-lg font-medium transition-all duration-300 text-white hover:bg-blue-500 hover:shadow-md">
                    Fisioterapia & Pilates
                </button>
                <button id="nav-gastronomia" class="nav-link px-4 py-2 rounded-full text-lg font-medium transition-all duration-300 text-white hover:bg-blue-500 hover:shadow-md">
                    Gastronomia
                </button>
                <button id="nav-favoritos" class="nav-link px-4 py-2 rounded-full text-lg font-medium transition-all duration-300 text-white hover:bg-blue-500 hover:shadow-md">
                    Meus Favoritos
                </button>
            </nav>
        </div>
    </header>

    <main id="app-content" class="flex-grow container mx-auto p-4 md:p-8">
        </main>

    <footer class="bg-gray-800 text-white p-4 md:p-6 text-center text-sm rounded-t-lg mt-8">
        <p>&copy; <span id="current-year"></span> App de Bem-Estar Total. Todos os direitos reservados.</p>
    </footer>

    <div id="exercise-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 w-full max-w-md lg:max-w-xl relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            <h3 id="modal-title" class="text-3xl font-bold text-blue-700 mb-4"></h3>
            <div id="modal-content-details" class="text-gray-700 text-lg leading-relaxed mb-6"></div>
            <div id="modal-video-placeholder" class="w-full h-48 bg-gray-200 rounded-md flex items-center justify-center text-gray-500 text-sm overflow-hidden">
                <img id="modal-image" src="" alt="Demonstração do Exercício" class="w-full h-full object-cover">
                <p id="modal-no-image-text" class="p-4 text-center hidden">Nenhuma imagem/vídeo disponível para este exercício ainda.</p>
            </div>
        </div>
    </div>

    <script>
        // Get the current year for the footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Get references to main elements
        const appContent = document.getElementById('app-content');
        const navLinks = document.querySelectorAll('.nav-link');

        // Modal elements
        const exerciseModal = document.getElementById('exercise-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalTitle = document.getElementById('modal-title');
        const modalContentDetails = document.getElementById('modal-content-details');
        const modalImage = document.getElementById('modal-image');
        const modalNoImageText = document.getElementById('modal-no-image-text');
        const modalVideoPlaceholder = document.getElementById('modal-video-placeholder');


        // Helper function to generate a unique ID (simple for this example)
        function generateUniqueId(prefix) {
            return prefix + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Functions for localStorage (Favorites)
        function getFavorites() {
            const favorites = localStorage.getItem('wellnessAppFavorites');
            return favorites ? JSON.parse(favorites) : [];
        }

        function saveFavorites(favorites) {
            localStorage.setItem('wellnessAppFavorites', JSON.stringify(favorites));
        }

        function toggleFavorite(itemId, itemType, itemTitle, itemContent) {
            let favorites = getFavorites();
            const existingIndex = favorites.findIndex(fav => fav.id === itemId);

            if (existingIndex > -1) {
                // Item already favorited, remove it
                favorites.splice(existingIndex, 1);
                alertMessage('Removido dos favoritos!', 'bg-red-500');
            } else {
                // Item not favorited, add it
                favorites.push({ id: itemId, type: itemType, title: itemTitle, content: itemContent });
                alertMessage('Adicionado aos favoritos!', 'bg-green-500');
            }
            saveFavorites(favorites);
            // Re-render the current page to update favorite button state
            loadPage(currentPage);
        }

        // Functions for localStorage (Completed Workouts)
        function getCompletedWorkouts() {
            const completed = localStorage.getItem('wellnessAppCompletedWorkouts');
            return completed ? JSON.parse(completed) : [];
        }

        function addCompletedWorkout(workoutId, workoutTitle, notes = '') {
            let completedWorkouts = getCompletedWorkouts();
            const now = new Date();
            const dateString = now.toLocaleDateString('pt-BR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            completedWorkouts.push({ id: workoutId, title: workoutTitle, date: dateString, notes: notes });
            saveCompletedWorkouts(completedWorkouts);
            alertMessage('Treino marcado como concluído!', 'bg-purple-500');
            // Re-render the current page to update button state (optional, but good for consistency)
            loadPage(currentPage);
        }

        function saveCompletedWorkouts(completedWorkouts) {
            localStorage.setItem('wellnessAppCompletedWorkouts', JSON.stringify(completedWorkouts));
        }

        // Custom Alert Message (instead of alert())
        function alertMessage(message, bgColor) {
            const alertBox = document.createElement('div');
            alertBox.className = `fixed top-4 right-4 p-4 rounded-lg text-white shadow-lg transition-transform transform translate-x-full duration-300 ${bgColor}`;
            alertBox.textContent = message;
            document.body.appendChild(alertBox);

            setTimeout(() => {
                alertBox.classList.remove('translate-x-full');
                alertBox.classList.add('translate-x-0');
            }, 50); // Small delay for animation

            setTimeout(() => {
                alertBox.classList.remove('translate-x-0');
                alertBox.classList.add('translate-x-full');
                alertBox.addEventListener('transitionend', () => alertBox.remove());
            }, 3000); // Disappear after 3 seconds
        }

        // Modal functions
        function openModal(title, description, imageUrl) {
            console.log('openModal called with imageUrl:', imageUrl); // DEBUG LOG
            modalTitle.textContent = title;
            modalContentDetails.textContent = description;

            // Always ensure modalImage is visible by default, then hide if no URL
            modalImage.classList.remove('hidden'); // Ensure it's not hidden initially
            modalNoImageText.classList.add('hidden'); // Hide "no image" text initially
            modalVideoPlaceholder.classList.remove('flex', 'items-center', 'justify-center'); // Remove centering if image is present

            if (imageUrl && imageUrl.startsWith('http')) { // Check if it's a valid URL string
                modalImage.src = imageUrl;
                console.log('Modal Image Source set to:', modalImage.src); // NOVO LOG
                console.log('Is modalImage hidden by class?', modalImage.classList.contains('hidden')); // NOVO LOG
            } else {
                modalImage.classList.add('hidden'); // Hide the image if URL is invalid or empty
                modalImage.src = ''; // Clear src
                modalNoImageText.classList.remove('hidden'); // Show "no image" text
                modalVideoPlaceholder.classList.add('flex', 'items-center', 'justify-center'); // Add centering for placeholder
                console.log('No valid imageUrl, modalImage is hidden and src cleared.'); // NOVO LOG
            }

            exerciseModal.classList.remove('hidden');
            console.log('Exercise Modal is now visible.'); // NOVO LOG
        }

        function closeModal() {
            exerciseModal.classList.add('hidden');
            modalImage.src = ''; // Clear image src when closing
        }

        closeModalBtn.addEventListener('click', closeModal);
        exerciseModal.addEventListener('click', (event) => {
            if (event.target === exerciseModal) { // Close if clicked outside the modal content
                closeModal();
            }
        });


        // Define all content here to filter
        const allContent = {
            'treinos': [
                {
                    id: 'treino_forca_total',
                    title: 'Treino Exemplo: Força Total (Iniciante)',
                    description: `Aqui você encontrará planos de treino desenvolvidos por profissionais qualificados,
                        adaptados às suas necessidades e objetivos, seja para ganho de massa, emagrecimento ou performance.`,
                    items: [
                        { name: 'Agachamento (Squat)', detail: 'O agachamento é um exercício fundamental para pernas e glúteos. Mantenha os pés na largura dos ombros, desça como se fosse sentar em uma cadeira, mantendo as costas retas e o peso nos calcanhares. Certifique-se de que seus joelhos não ultrapassem a linha dos pés. Suba controladamente.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Agachamento', emoji: '🏋️‍♀️', series: '3 séries de 10-12 repetições' },
                        { name: 'Flexão de Braço (Push-up)', detail: 'A flexão de braço fortalece peito, ombros e tríceps. Comece em posição de prancha, desça o corpo até o peito quase tocar o chão, mantendo o corpo reto. Empurre de volta à posição inicial. Se for difícil, apoie os joelhos no chão.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Flexao', emoji: '🤸‍♂️', series: '3 séries de 8-10 repetições (ou com joelhos no chão)' },
                        { name: 'Remada Curvada (Bent-over Row)', detail: 'A remada curvada trabalha as costas e bíceps. Com halteres ou elástico, incline o tronco para frente, mantendo as costas retas. Puxe o peso em direção ao abdômen, espremendo as omoplatas. Retorne controladamente.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Remada', emoji: '💪', series: '3 séries de 10-12 repetições (com halteres ou elástico)' },
                        { name: 'Prancha (Plank)', detail: 'A prancha é excelente para fortalecer o core. Mantenha o corpo reto como uma tábua, apoiado nos antebraços e pontas dos pés. Contraia o abdômen e glúteos, evitando que o quadril caia ou suba demais.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Prancha', emoji: '🧘', series: '3 séries, segurar por 30-45 segundos' },
                        { name: 'Afundo (Lunge)', detail: 'O afundo trabalha pernas e glúteos de forma unilateral. Dê um passo à frente com uma perna, abaixando o quadril até que ambos os joelhos formem um ângulo de 90 graus. O joelho de trás quase toca o chão. Empurre para cima e repita com a outra perna.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Afundo', emoji: '🦵', series: '3 séries de 10 repetições por perna' }
                    ],
                    notes: '*Descanse 60-90 segundos entre as séries. Realize este treino 2-3 vezes por semana.*'
                },
                {
                    id: 'treino_cardio_hiit',
                    title: 'Treino Exemplo: Cardio HIIT (Intermediário)',
                    description: ``, // Description for this specific workout, or leave empty if general description is enough
                    items: [
                        { name: 'Polichinelos (Jumping Jacks)', detail: 'Comece com os pés juntos e braços ao lado do corpo. Salte, abrindo as pernas e levantando os braços acima da cabeça. Volte à posição inicial. Faça o mais rápido possível.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Polichinelos', emoji: '', series: '40 segundos de execução, 20 segundos de descanso' },
                        { name: 'Corrida no Lugar (High Knees)', detail: 'Corra no lugar, levantando os joelhos o mais alto possível em direção ao peito. Mantenha um ritmo rápido e use os braços para impulsionar.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Corrida+no+Lugar', emoji: '', series: '40 segundos de execução, 20 segundos de descanso' },
                        { name: 'Burpees', detail: 'Comece em pé, agache, coloque as mãos no chão, jogue os pés para trás (posição de prancha), faça uma flexão (opcional), traga os pés de volta, e salte com os braços para cima.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Burpees', emoji: '', series: '40 segundos de execução, 20 segundos de descanso' },
                        { name: 'Mountain Climbers', detail: 'Em posição de prancha, traga um joelho de cada vez em direção ao peito, alternando as pernas rapidamente, como se estivesse escalando uma montanha.', image: 'https://placehold.co/400x250/E0E7FF/4338CA?text=Mountain+Climbers', emoji: '', series: '40 segundos de execução, 20 segundos de descanso' }
                    ],
                    notes: '*Repita o circuito 3-4 vezes. Descanse 1 minuto entre os circuitos. Ideal para 2-3 vezes por semana.*'
                }
            ],
            'fisioterapia-pilates': [
                {
                    id: 'pilates_iniciantes',
                    title: 'Rotina de Pilates para Iniciantes (Foco no Core)',
                    description: `Nesta seção, você terá acesso a exercícios e orientações para reabilitação,
                        prevenção de lesões e fortalecimento do core, essenciais para uma vida sem dores e com mais movimento.`,
                    items: [
                        { name: 'Cem (The Hundred)', detail: 'Deite-se de costas, pernas em 90 graus (mesa), levante a cabeça e ombros. Bombeie os braços para cima e para baixo 100 vezes, inspirando por 5 e expirando por 5. Mantenha o abdômen contraído e a lombar no chão.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Cem+Pilates', emoji: '🌬️', series: '100 bombeamentos de braço, inspirando por 5 e expirando por 5' },
                        { name: 'Ponte (Bridge)', detail: 'Deite-se de costas, joelhos flexionados, pés no chão. Levante o quadril do chão, articulando a coluna vértebra por vértebra, até formar uma linha reta dos ombros aos joelhos. Contraia glúteos e abdômen. Desça lentamente.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Ponte+Pilates', emoji: '⬆️', series: '3 séries de 10-12 elevações de quadril' },
                        { name: 'Rolamento para Cima (Roll-up)', detail: 'Deite-se de costas, braços estendidos acima da cabeça. Inspire e, ao expirar, levante a cabeça, ombros e tronco, enrolando a coluna para frente, como se fosse tocar os pés. Retorne desenrolando a coluna lentamente.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Roll-up+Pilates', emoji: '🧘‍♀️', series: '3 séries de 8-10 repetições, controlando o movimento da coluna' },
                        { name: 'Single Leg Stretch', detail: 'Deite-se de costas, pernas em 90 graus. Leve um joelho ao peito enquanto a outra perna se estende para longe. Troque as pernas, mantendo o abdômen contraído e a lombar estável. Respire fluidamente.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Single+Leg+Stretch', emoji: '🦵', series: '3 séries de 10-12 repetições por perna' },
                        { name: 'Alongamento da Coluna para Frente (Spine Stretch Forward)', detail: 'Sente-se com as pernas estendidas à frente, pés flexionados. Inspire, alongue a coluna. Ao expirar, curve o tronco para frente a partir do abdômen, alcançando os pés. Mantenha os ombros relaxados e a coluna em C. Retorne vértebra por vértebra.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Spine+Stretch', emoji: '🤸‍♀️', series: '3 séries de 8-10 repetições' }
                    ],
                    notes: '*Concentre-se na respiração e no controle dos movimentos. Faça 2-3 vezes por semana.*'
                },
                {
                    id: 'fisio_mobilidade_coluna',
                    title: 'Exercícios de Fisioterapia: Mobilidade da Coluna',
                    description: ``,
                    items: [
                        { name: 'Gato-Camelo (Cat-Cow)', detail: 'Comece de quatro, mãos abaixo dos ombros e joelhos abaixo dos quadris. Inspire, arqueie a coluna, olhando para cima (vaca). Expire, arredonde a coluna, puxando o umbigo para dentro (gato). Faça lentamente e com controle.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Gato-Camelo', emoji: '', series: '3 séries de 10 repetições' },
                        { name: 'Rotação de Tronco Deitado', detail: 'Deite-se de costas, joelhos flexionados e pés no chão. Mantenha os ombros no chão e deixe os joelhos caírem para um lado e depois para o outro, sentindo o alongamento na coluna.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Rotacao+Tronco', emoji: '', series: '3 séries de 10 repetições para cada lado' },
                        { name: 'Alongamento de Joelho ao Peito', detail: 'Deite-se de costas. Puxe um joelho em direção ao peito, segurando com as mãos, enquanto a outra perna permanece estendida. Mantenha por 20-30 segundos e troque de lado.', image: 'https://placehold.co/400x250/D1FAE5/065F46?text=Alongamento+Joelho', emoji: '', series: '3 séries de 20-30 segundos por perna' }
                    ],
                    notes: '*Realize estes exercícios suavemente, focando na mobilidade e alívio de tensão.*'
                }
            ],
            'gastronomia': [
                {
                    id: 'receita_quinoa',
                    title: 'Receita: Salada de Quinoa com Vegetais Coloridos 🥗',
                    description: `Descubra um mundo de receitas deliciosas e nutritivas, pensadas para complementar
                        seu estilo de vida ativo e saudável. Alimente-se bem sem abrir mão do prazer de comer!`,
                    ingredients: [
                        '1 xícara de quinoa cozida', '1/2 pepino picado', '1/2 pimentão vermelho picado',
                        '1/2 cebola roxa picada', '1/4 xícara de milho cozido', 'Folhas de hortelã fresca picadas a gosto',
                        'Suco de 1 limão', '2 colheres de sopa de azeite de oliva extra virgem', 'Sal e pimenta do reino a gosto'
                    ],
                    preparation: [
                        'Em uma tigela grande, misture a quinoa cozida, pepino, pimentão, cebola roxa e milho.',
                        'Adicione as folhas de hortelã.',
                        'Em um recipiente separado, misture o suco de limão, azeite, sal e pimenta.',
                        'Despeje o molho sobre a salada e misture bem. Sirva fria.'
                    ]
                },
                {
                    id: 'receita_smoothie',
                    title: 'Receita: Smoothie Verde Energizante 🥤🌿',
                    description: ``,
                    ingredients: [
                        '1 xícara de espinafre fresco', '1/2 banana congelada', '1/2 maçã picada',
                        '1/2 xícara de água de coco (ou água filtrada)', '1 colher de sopa de semente de chia', 'Gelo a gosto'
                    ],
                    preparation: [
                        'Adicione todos os ingredientes no liquidificador.',
                        'Bata até obter uma mistura homogênea e cremosa.',
                        'Sirva imediatamente.'
                    ]
                },
                {
                    id: 'receita_wrap_frango',
                    title: 'Receita: Wrap de Frango com Vegetais Frescos 🌯',
                    description: ``,
                    ingredients: [
                        '1 tortilla integral grande', '100g de peito de frango cozido e desfiado',
                        '1/4 xícara de cenoura ralada', '1/4 xícara de repolho roxo picado',
                        '2 folhas de alface grandes', '1 colher de sopa de iogurte natural (ou maionese light)',
                        '1 colher de chá de mostarda dijon', 'Sal e pimenta do reino a gosto'
                    ],
                    preparation: [
                        'Em uma tigela, misture o frango desfiado, cenoura, repolho roxo, iogurte, mostarda, sal e pimenta.',
                        'Espalhe as folhas de alface sobre a tortilla.',
                        'Distribua a mistura de frango sobre a alface.',
                        'Enrole a tortilla firmemente. Corte ao meio e sirva.'
                    ]
                }
            ]
        };

        let currentPage = 'home'; // Keep track of the current page

        // Function to load page content
        function loadPage(pageName, filterText = '') {
            currentPage = pageName; // Update current page

            if (pageName === 'treinos' || pageName === 'fisioterapia-pilates' || pageName === 'gastronomia') {
                // Render the main structure with search input only once
                appContent.innerHTML = `
                    <div class="bg-white p-6 md:p-10 rounded-lg shadow-xl">
                        <h2 class="text-3xl font-bold text-blue-700 mb-6">Sua Jornada de Bem-Estar</h2>
                        <input type="text" id="search-input" placeholder="Pesquisar..." class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <div id="filtered-items-container">
                            </div>
                    </div>
                `;
                const searchInput = document.getElementById('search-input');
                const filteredItemsContainer = document.getElementById('filtered-items-container');

                if (searchInput) {
                    searchInput.value = filterText; // Set the search input value
                    searchInput.focus(); // Keep focus on the input
                    // Remove existing listener to prevent duplicates
                    searchInput.removeEventListener('input', handleSearchInput);
                    searchInput.addEventListener('input', handleSearchInput);
                }

                // Initial render of filtered items
                filteredItemsContainer.innerHTML = generateFilteredItemsHtml(pageName, filterText);

            } else {
                appContent.innerHTML = pages[pageName];
                // If on home page, attach notification listeners
                if (pageName === 'home') {
                    attachNotificationListeners();
                }
            }


            // Update active link styling
            navLinks.forEach(link => {
                link.classList.remove('active-link');
                link.classList.add('text-white', 'hover:bg-blue-500', 'hover:shadow-md');
            });

            const activeLink = document.getElementById(`nav-${pageName}`);
            if (activeLink) {
                activeLink.classList.remove('text-white', 'hover:bg-blue-500', 'hover:shadow-md');
                activeLink.classList.add('active-link');
            }

            // If it's the favorites page, render the favorited items
            if (pageName === 'favoritos') {
                renderFavorites();
                renderCompletedWorkouts(); // Render completed workouts on favorites page
            } else {
                // Attach event listeners to favorite buttons on other pages
                attachFavoriteButtonListeners();
                updateFavoriteButtonStates();
                // Attach event listeners for exercise details
                attachExerciseDetailListeners();
                // Attach event listeners for complete workout buttons
                attachCompleteWorkoutListeners();
            }
        }

        // Handler for search input
        function handleSearchInput(event) {
            const filterText = event.target.value;
            const filteredItemsContainer = document.getElementById('filtered-items-container');
            if (filteredItemsContainer) {
                filteredItemsContainer.innerHTML = generateFilteredItemsHtml(currentPage, filterText);
                attachFavoriteButtonListeners(); // Re-attach listeners after content update
                updateFavoriteButtonStates(); // Update favorite button states
                attachExerciseDetailListeners(); // Re-attach detail listeners
                attachCompleteWorkoutListeners(); // Re-attach complete workout listeners
            }
        }


        // Function to attach listeners to favorite buttons
        function attachFavoriteButtonListeners() {
            const favoriteButtons = document.querySelectorAll('.favorite-btn');
            favoriteButtons.forEach(button => {
                // Remove existing listener to prevent duplicates
                button.removeEventListener('click', handleFavoriteButtonClick);
                button.addEventListener('click', handleFavoriteButtonClick);
            });
        }

        function handleFavoriteButtonClick(event) {
            const button = event.target;
            const itemId = button.
